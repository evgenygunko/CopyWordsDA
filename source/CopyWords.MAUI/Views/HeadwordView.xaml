<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/maui/global"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:DataType="HeadwordViewModel"
             x:Class="CopyWords.MAUI.Views.HeadwordView">

    <ContentView.Resources>
        <ResourceDictionary>
            <!-- Workaround for a crash on Mac: type IsStringNotNullOrWhiteSpaceConverter cannot be found -->
            <!--<toolkit:IsStringNotNullOrWhiteSpaceConverter x:Key="IsStringNotNullOrWhiteSpaceConverter" />-->
            <MyIsStringNotNullOrWhiteSpaceConverter x:Key="IsStringNotNullOrWhiteSpaceConverter" />
            <InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </ContentView.Resources>

    <Border
            BackgroundColor="{DynamicResource TranslationBoxColor}"
            Stroke="{DynamicResource BorderStrokeColor}"
            StrokeThickness="1">

        <Grid Padding="{OnPlatform '7,3,0,3', Android='0'}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>

            <!-- Russian -->
            <CheckBox Grid.Row="0" Grid.Column="0" x:Name="checkBoxRU"
                      IsVisible="{Binding CanCheckRussianTranslation}"
                      IsChecked="{Binding IsRussianTranslationChecked}" />
            <Label Grid.Row="0" Grid.Column="1" LineBreakMode="WordWrap" VerticalOptions="Center"
                   Margin="{OnPlatform '7', Android='0,0,7,0'}">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="{Binding Russian, FallbackValue='акула'}"/>
                    </FormattedString>
                </Label.FormattedText>

                <Label.Triggers>
                    <DataTrigger TargetType="Label" Binding="{Binding IsRussianTranslationChecked}" Value="false">
                        <Setter Property="BackgroundColor" Value="{DynamicResource TranslationBoxColor}" />
                    </DataTrigger>
                    <DataTrigger TargetType="Label" Binding="{Binding IsRussianTranslationChecked}" Value="true">
                        <Setter Property="BackgroundColor" Value="{DynamicResource SelectedItemColor}" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>

            <!-- English -->
            <CheckBox Grid.Row="1" Grid.Column="0"
                        IsChecked="{Binding IsEnglishTranslationChecked}"
                        IsVisible="{Binding CanCheckEnglishTranslation}"/>
            <Label Grid.Row="1" Grid.Column="1" LineBreakMode="WordWrap" VerticalOptions="Center"
                   Margin="{OnPlatform '7,4,7,7', Android='0,0,7,0'}"
                   IsVisible="{Binding ShowEnglishTranslation}">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="{Binding English, FallbackValue='shark'}"/>
                    </FormattedString>
                </Label.FormattedText>

                <Label.Triggers>
                    <DataTrigger TargetType="Label" Binding="{Binding IsEnglishTranslationChecked}" Value="false">
                        <Setter Property="BackgroundColor" Value="{DynamicResource TranslationBoxColor}" />
                    </DataTrigger>
                    <DataTrigger TargetType="Label" Binding="{Binding IsEnglishTranslationChecked}" Value="true">
                        <Setter Property="BackgroundColor" Value="{DynamicResource SelectedItemColor}" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>
        </Grid>
    </Border>
</ContentView>
